# address: realtime.store
--- # Fetch document
action: get
id: docId
accessToken: token
autoCreate: true
--- &snapshotData # reply
v: 0
snapshot: []

--- # Fetch version
action: head
id: docId
--- # reply
0

--- # Submit Operations
action: post
id: docId
opData: &opData
  v: 1
  op: []
  sid: sid
  seq: 3 # optional, seq and sid uniquely globally identify an operation
  uid: userId
--- # reply
v: 2 # the version at which this operation was applied
ops: # operations by which this operation was transformed, if someone else's operation reaches the server before this
- *opData
...
  
# address: realtime.store.ops
--- # Get ops
id: docId
from: 10
to: 11 # noninclusively
--- # reply
- *opData

# address: realtime.store:id
--- # publish channel
<<: *opData
...


# address: realtime.store.collaborator:id
--- &collaborator # Presence publish channel
isJoined: false
sessionId: sid
userId: uid
displayName: name
color: #58B442
isMe: true
isAnonymous: false
photoUrl: http://xx
...

--- # address: @realtime.store.event.EventType:id:objectId Event publish
*Event

--- # address: @realtime.store.event.document_error:id Document error event publish
*com.goodow.realtime.Error
...