# address: realtime/store
--- # Fetch document
action: get
id: docType/docId
accessToken: token
--- &snapshotData # reply
v: 0
snapshot: []
root: {}
collaborators: [*collaborator]

--- # Fetch version
action: head
id: docType/docId
--- # reply
0

--- # Submit Operations
action: post
id: docType/docId
opData: &opData
  v: 1
  op: []
  sid: sid
  seq: 3 # optional, seq and sid uniquely globally identify an operation
  uid: userId
--- # reply
v: 2 # the version at which this operation was applied
ops: # operations by which this operation was transformed, if someone else's operation reaches the server before this
- *opData
...
  
# address: realtime/store/_ops
--- # Get ops
id: docType/docId
from: 10
to: 11 # noninclusively
--- # reply
- *opData

# address: realtime/store/docType/docId/_watch
--- # Anyone subscribed to this address will be notified as document changes
--- # document change notifications
<<: *opData
...


# address: realtime/store/docType/docId/_presence/_watch
--- # Anyone subscribed to this address will be notified as clients come and go
--- &collaborator # user presence notifications
isJoined: false
sessionId: sid
userId: ANONYMOUS_uid
displayName: Anonymous Slow loris
color: #58B442
isAnonymous: true
photoUrl: https://ssl.gstatic.com/docs/common/profile/slowloris_lg.png
...
# address: realtime/store/_presence
--- # Get a complete list of online collaborators
id: docType/docId
--- # reply
- *collaborator
...


--- # address: @realtime/store/docType/docId/document_error Document error event publish
*com.goodow.realtime.store.Error
...
--- # address: @realtime/store/docType/docId/document_save_state_changed
*com.goodow.realtime.store.DocumentSaveStateChangedEvent
...
--- # address: @realtime/store/docType/docId/collaborator_joined
*com.goodow.realtime.store.CollaboratorJoinedEvent
...
--- # address: @realtime/store/docType/docId/collaborator_left
*com.goodow.realtime.store.CollaboratorLeftEvent
...
--- # address: @realtime/store/docType/docId/undo_redo_state_changed
*com.goodow.realtime.store.UndoRedoStateChangedEvent
...

--- # address: @realtime/store/docType/docId/objectId/event_type Event publish
*com.goodow.realtime.store.BaseModelEvent
...
